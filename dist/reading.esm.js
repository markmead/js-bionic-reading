var h={targetSelector:"[data-bionic-reading]",contentSelector:"h1, h2, h3, h4, h5, h6, p, a, li, blockquote, figcaption, dt, dd",excludeSelector:"script, style, code, pre, kbd, samp, noscript",minWordLength:2,boldRatio:.5,baseFontWeight:400,processedAttribute:"data-bionic-processed"};function s(o={}){let n={...h,...o},t=[...document.querySelectorAll(n.targetSelector)];t.length&&t.forEach(i=>{if(i.getAttribute("data-bionic-reading")==="off")return;[...i.querySelectorAll(n.contentSelector)].filter(e=>!e.closest(n.excludeSelector)).forEach(e=>{if(e.getAttribute(n.processedAttribute)==="true"||e.closest('[data-bionic-reading="off"]'))return;n.baseFontWeight!==null&&n.baseFontWeight!==void 0&&(e.style.fontWeight=String(n.baseFontWeight)),p(e,n.excludeSelector).forEach(c=>{let d=g(c.nodeValue||"",n);c.parentNode?.replaceChild(d,c)}),e.setAttribute(n.processedAttribute,"true")})})}function p(o,n){let t=[],i=document.createTreeWalker(o,NodeFilter.SHOW_TEXT,{acceptNode(r){if(!r.nodeValue||!r.nodeValue.trim())return NodeFilter.FILTER_REJECT;let e=r.parentElement;return!e||e.closest(n)||e.closest("strong")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);for(;i.nextNode();)t.push(i.currentNode);return t}function g(o,n){let t=document.createDocumentFragment(),i=/(\s+|[^\s]+)/g;return(o.match(i)||[]).forEach(e=>{if(/^\s+$/.test(e)){t.appendChild(document.createTextNode(e));return}t.appendChild(m(e,n))}),t}function m(o,n){let t=document.createDocumentFragment(),i=/[\p{L}\p{N}]+/gu,r=0,e=i.exec(o);if(!e)return t.appendChild(document.createTextNode(o)),t;let a=Math.min(Math.max(n.boldRatio,0),1);for(;e;){let[c]=e,d=e.index;if(d>r&&t.appendChild(document.createTextNode(o.slice(r,d))),c.length<n.minWordLength||a===0)t.appendChild(document.createTextNode(c));else{let l=Math.ceil(c.length*a),u=document.createElement("strong");u.textContent=c.slice(0,l),t.appendChild(u),l<c.length&&t.appendChild(document.createTextNode(c.slice(l)))}r=d+c.length,e=i.exec(o)}return r<o.length&&t.appendChild(document.createTextNode(o.slice(r))),t}var x=s;export{x as default};
